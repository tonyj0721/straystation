<!doctype html>
<html lang="zh-Hant-TW">

<head>
  <meta charset="utf-8" />

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YBC0MQBC2F"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    // 若在本機開發，開啟 DebugView；正式站不會開
    gtag('config', 'G-YBC0MQBC2F', { debug_mode: location.hostname.includes('localhost') });
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="images/dogpaw-32.png" sizes="32x32" type="image/png">
  <link rel="apple-touch-icon" href="images/dogpaw-180.png">
  <title>關於簡媽媽｜台中簡媽媽狗園</title>
  <meta name="description" content="瀏覽待認養貓咪清單，支援品種、毛色、年齡、性別篩選，快速找到適合你的毛孩。">
  <meta name="theme-color" content="#fcd34d">
  <link rel="stylesheet" href="assets/tailwind.css">
  <link rel="stylesheet" href="assets/shared.css">
</head>

<body class="text-gray-800 bg-gradient-to-br from-brand-50 to-white">
  <!-- Navbar -->
  <header class="bg-white/80 backdrop-blur border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="h-16 flex items-center justify-between">
        <a href="index.html" class="flex items-center gap-2 font-semibold text-2xl">
          <img src="images/dogpaw.png" alt="dogpaw" id="btnGoogleLogin" class="h-8 w-8 object-contain" />
          <span class="flex items-baseline gap-1">
            <span>台中簡媽媽狗園</span>
            <span id="adminLabel" class="text-xs text-gray-600 hidden">管理員</span>
          </span>
        </a>

        <!-- 桌機導覽 -->
        <nav class="hidden md:flex items-center gap-6 ml-auto">
          <a href="index.html" class="hover:text-brand-600">首 頁</a>
          <a href="cats.html" class="hover:text-brand-600">我想養貓咪</a>
          <a href="dogs.html" class="hover:text-brand-600">我想養狗狗</a>
          <a href="home.html" class="hover:text-brand-600">幸福的歸宿</a>
          <a href="admin.html" class="hover:text-brand-600 nav-admin-link hidden">後台管理</a>
          <button type="button" id="btnLogoutDesktop"
            class="text-sm text-gray-600 hover:text-brand-600 nav-logout-btn hidden">
            登出
          </button>
        </nav>

        <!-- 手機漢堡鈕 -->
        <div class="flex items-center gap-2">
          <button id="menuBtn"
            class="md:hidden p-2 rounded-lg border border-[#AEDDEF] bg-white/80 hover:bg-[#AEDDEF]/10" aria-label="開啟選單"
            aria-haspopup="menu" aria-expanded="false" aria-controls="menuOverlay">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>
  <!-- 透明覆蓋層：專門接「點外面關閉」 -->
  <div id="menuOverlay" class="fixed inset-0 z-50 hidden" role="dialog" aria-modal="true">
    <div id="overlayClickArea" class="absolute inset-0"></div>

    <!-- 右上角彈出選單：固定位置，不推版，覆蓋 hero -->
    <nav id="menuPanel" class="fixed opacity-0 scale-y-0 origin-top-right rounded-2xl shadow-xl
            bg-[#AEDDEF] w-fit max-w-[90vw] p-3 transition duration-150 ease-out">
      <!-- 小箭頭（同面板色） -->
      <div class="absolute -top-2 right-5 w-3 h-3 rotate-45 bg-[#AEDDEF]"></div>

      <!-- 按鈕群：保留 space-y-2、字體 18px -->
      <ul class="space-y-2 py-1 text-[18px]" role="menu" aria-orientation="vertical" tabindex="-1">
        <li>
          <a href="index.html" role="menuitem" tabindex="-1" class="flex w-full items-center gap-3 whitespace-nowrap rounded-xl bg-white px-4 py-2
            text-slate-700 shadow hover:shadow-md hover:bg-white/95 active:scale-[0.99]
            focus:outline-none focus:ring-2 focus:ring-white/70">
            <span aria-hidden="true" class="grid size-8 place-items-center rounded-lg bg-white shadow text-xl">🧭</span>
            <span class="flex-1 text-center">首&emsp;&emsp;頁</span>
          </a>
        </li>

        <li>
          <a href="cats.html" role="menuitem" tabindex="-1" class="flex items-center gap-3 whitespace-nowrap rounded-xl bg-white px-4 py-2
                text-slate-700 shadow hover:shadow-md hover:bg-white/95 active:scale-[0.99]
                focus:outline-none focus:ring-2 focus:ring-white/70">
            <span aria-hidden="true" class="text-xl leading-none">🐱</span>
            <span>我想養貓咪</span>
          </a>
        </li>

        <li>
          <a href="dogs.html" role="menuitem" tabindex="-1" class="flex items-center gap-3 whitespace-nowrap rounded-xl bg-white px-4 py-2
                text-slate-700 shadow hover:shadow-md hover:bg-white/95 active:scale-[0.99]
                focus:outline-none focus:ring-2 focus:ring-white/70">
            <span aria-hidden="true" class="text-xl leading-none">🐶</span>
            <span>我想養狗狗</span>
          </a>
        </li>

        <li>
          <a href="home.html" role="menuitem" tabindex="-1" class="flex items-center gap-3 whitespace-nowrap rounded-xl bg-white px-4 py-2
            text-slate-700 shadow hover:shadow-md hover:bg-white/95 active:scale-[0.99]
            focus:outline-none focus:ring-2 focus:ring-white/70">
            <span aria-hidden="true" class="text-xl leading-none">🏠</span>
            <span>幸福的歸宿</span>
          </a>
        </li>

        <li>
          <a href="admin.html" role="menuitem" tabindex="-1" class="flex items-center gap-3 whitespace-nowrap rounded-xl bg-white px-4 py-2
                text-slate-700 shadow hover:shadow-md hover:bg-white/95 active:scale-[0.99]
                focus:outline-none focus:ring-2 focus:ring-white/70 nav-admin-link hidden">
            <span aria-hidden="true" class="text-xl leading-none">🔒</span>
            <span>後台管理</span>
          </a>
        </li>

        <li>
          <button type="button" id="btnLogoutMobile" class="w-full flex items-center gap-3 whitespace-nowrap rounded-xl bg-white px-4 py-2
                 text-slate-700 shadow hover:shadow-md hover:bg-white/95 active:scale-[0.99]
                 focus:outline-none focus:ring-2 focus:ring-white/70
                 nav-logout-btn hidden" role="menuitem" tabindex="-1">
            <span aria-hidden="true" class="text-xl leading-none">🚪</span>
            <span>登出</span>
          </button>
        </li>
      </ul>
    </nav>
  </div>
  <script>
    const menuBtn = document.getElementById('menuBtn');
    const overlay = document.getElementById('menuOverlay');
    const clickArea = document.getElementById('overlayClickArea');
    const panel = document.getElementById('menuPanel');

    function positionPanel() {
      const r = menuBtn.getBoundingClientRect();
      const gap = 8;
      panel.style.top = '-1000px';
      panel.style.left = '-1000px';
      const w = panel.offsetWidth;
      let left = r.right - w;
      left = Math.max(8, Math.min(left, window.innerWidth - w - 8));
      panel.style.top = (r.bottom + gap) + 'px';
      panel.style.left = left + 'px';
    }
    function openMenu() {
      overlay.classList.remove('hidden');
      positionPanel();
      requestAnimationFrame(() => {
        panel.classList.remove('opacity-0', 'scale-y-0');
        panel.classList.add('scale-y-100');
      });
      document.addEventListener('keydown', onEsc);
      menuBtn.setAttribute('aria-expanded', 'true');
      const firstItem = panel.querySelector('[role="menuitem"]');
      if (firstItem) firstItem.focus();
    }
    function closeMenu() {
      panel.classList.add('opacity-0');
      panel.classList.remove('scale-y-100');
      panel.classList.add('scale-y-0');
      menuBtn.setAttribute('aria-expanded', 'false');
      document.removeEventListener('keydown', onEsc);
      setTimeout(() => overlay.classList.add('hidden'), 150);
      menuBtn.focus();
    }
    function onEsc(e) { if (e.key === 'Escape') closeMenu(); }

    menuBtn.addEventListener('click', () => {
      const expanded = menuBtn.getAttribute('aria-expanded') === 'true';
      expanded ? closeMenu() : openMenu();
    });
    clickArea.addEventListener('click', (e) => {
      if (!panel.contains(e.target) && e.target !== menuBtn) closeMenu();
    });
    panel.addEventListener('keydown', (e) => {
      const items = Array.from(panel.querySelectorAll('[role="menuitem"]'));
      const i = items.indexOf(document.activeElement);
      if (e.key === 'ArrowDown') { e.preventDefault(); items[(i + 1 + items.length) % items.length].focus(); }
      if (e.key === 'ArrowUp') { e.preventDefault(); items[(i - 1 + items.length) % items.length].focus(); }
      if (e.key === 'Home') { e.preventDefault(); items[0].focus(); }
      if (e.key === 'End') { e.preventDefault(); items[items.length - 1].focus(); }
    });
    window.addEventListener('resize', () => {
      if (!overlay.classList.contains('hidden')) positionPanel();
    });
    // 點任何選單項目後就關閉（避免停留）
    panel.querySelectorAll('[role="menuitem"]').forEach(el => {
      el.addEventListener('click', () => { try { closeMenu(); } catch (_) { } });
    });
  </script>

  <!-- Main -->
  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10 sm:py-14">
    <div class="grid md:grid-cols-2 gap-8 lg:gap-12 items-start">
      <!-- 文案 -->
      <section>
        <h1 class="text-3xl sm:text-4xl font-extrabold leading-tight">
          關於簡媽媽
        </h1>

        <div class="mt-5 space-y-4 text-gray-700 leading-relaxed">
          <p>這裡，是浪浪等家的地方。<br>
            近二十年前，簡媽媽開始救援浪浪，租下土地，搭起簡單狗舍，安置那些無法在街頭生存的毛孩們。</p>

          <p>從幾隻開始，到如今百餘孩子在這等待家。需要的照顧、醫療和資源也越來越多，於是簡媽在幾位志工協助下成立
            <strong>社團法人簡媽媽愛護動物協會</strong>，努力撐起送醫、結紮、照顧與送養的每一步。
          </p>

          <p>這裡沒有華麗設施，只有溫暖守護。</p>

          我們相信：買得到的是寵物，認養到的是家人！邀請你，和我們一起，讓更多等待的孩子回家。</p>

          <p class="text-sm text-gray-500">📌 中市社團字第1140036732號</p>
        </div>

        <!-- CTA -->
        <div class="mt-8 flex flex-col sm:flex-row gap-3">
          <a href="dogs.html"
            class="inline-flex items-center justify-center rounded-xl px-5 py-3 bg-gray-900 text-white hover:bg-black">
            看狗狗待領養名單
          </a>
          <a href="cats.html"
            class="inline-flex items-center justify-center rounded-xl px-5 py-3 ring-1 ring-gray-300 text-gray-800 hover:bg-gray-50">
            看貓咪待領養名單
          </a>
        </div>

        <!-- 大標語 -->
        <p class="mt-10 text-2xl sm:text-3xl font-bold">
          用領養，給牠們一生的幸福
        </p>
      </section>

      <!-- 圖片 -->
      <section class="order-first md:order-none">
        <figure class="rounded-3xl overflow-hidden shadow-sm ring-1 ring-gray-200">
          <img src="images/chienma.jpg" alt="簡媽媽擁抱狗狗的照片" class="w-full h-full object-cover" loading="lazy">
        </figure>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-50 border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-sm text-gray-500">© <span id="year"></span>
      <img src="images/浪浪轉運站 Logo.png" alt="浪浪轉運站 Logo"
        style="display:inline-flex;width:1em;height:1em;vertical-align:-0.15em;margin:0.01em -0.25em 0.01em 0.25em;">
      浪浪轉運站 Stray Station. 保留所有權利。
    </div>
  </footer>

  <script src="./assets/firebase-config.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
    import {
      getAuth,
      GoogleAuthProvider,
      signInWithPopup,
      signOut,
      onAuthStateChanged,
    } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";

    const app = initializeApp(window.firebaseConfig);

    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    const dogpawBtn = document.getElementById("btnGoogleLogin");
    const adminLabel = document.getElementById("adminLabel");
    const adminLinks = document.querySelectorAll(".nav-admin-link");
    const logoutBtns = document.querySelectorAll(".nav-logout-btn");

    // 依登入狀態更新 header / 導覽
    onAuthStateChanged(auth, (user) => {
      const isLogin = !!user;

      if (adminLabel) {
        adminLabel.classList.toggle("hidden", !isLogin);
      }

      adminLinks.forEach((el) => {
        el.classList.toggle("hidden", !isLogin);
      });

      logoutBtns.forEach((el) => {
        el.classList.toggle("hidden", !isLogin);
      });
    });

    // 點狗掌 → Google 登入（未登入時）
    if (dogpawBtn) {
      dogpawBtn.addEventListener("click", async (e) => {
        e.preventDefault();
        e.stopPropagation();

        if (auth.currentUser) return;   // 已登入就不重複登入

        try {
          await signInWithPopup(auth, provider);
          // 登入後會觸發 onAuthStateChanged，所以不用另外改畫面
        } catch (err) {
          console.error("Google 登入失敗", err);
          alert("Google 登入失敗，請稍後再試。");
        }
      });
    }

    // 桌機 + 手機「登出」按鈕
    logoutBtns.forEach((btn) => {
      btn.addEventListener("click", async (e) => {
        e.preventDefault();
        try {
          await signOut(auth);

          // 如果手機選單有開，把它關掉
          const overlay = document.getElementById("menuOverlay");
          if (overlay) overlay.classList.add("hidden");
        } catch (err) {
          console.error("登出失敗", err);
          alert("登出失敗，請稍後再試。");
        }
      });
    });

    const y = document.getElementById('year');
    if (y) y.textContent = new Date().getFullYear();

    history.scrollRestoration = "manual";
    window.scrollTo(0, 0);
  </script>
</body>

</html>