<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æµªæµªè½‰é‹ç«™ï½œç®¡ç†å“¡æ–°å¢å‹•ç‰©è³‡æ–™</title>
  <script type="module">
    // === åˆå§‹åŒ– Firebase ===
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
    import { getFirestore, addDoc, collection, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

    // âš ï¸ æ›¿æ›æˆä½ è‡ªå·±çš„ Firebase è¨­å®šï¼ˆfirebaseConfigï¼‰
    const firebaseConfig = {
      apiKey: "AIzaSyC4NT2KOm_Cw2OEdaaOimxI0ruoNv_u_9g",
      authDomain: "straystation.firebaseapp.com",
      projectId: "straystation",
      storageBucket: "straystation.firebasestorage.app",
      messagingSenderId: "611366379195",
      appId: "1:611366379195:web:ef5a632e88d8bba1d6139e"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // === è¡¨å–®æäº¤äº‹ä»¶ ===
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("addPetForm");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const data = Object.fromEntries(new FormData(form).entries());
        data.vaccinated = form.vaccinated.checked;
        data.neutered = form.neutered.checked;
        data.goodWithKids = form.goodWithKids.checked;
        data.createdAt = serverTimestamp();

        try {
          await addDoc(collection(db, "pets"), data);
          alert(`ğŸ¾ å·²æˆåŠŸæ–°å¢ ${data.name}ï¼`);
          form.reset();
        } catch (error) {
          console.error("æ–°å¢å¤±æ•—ï¼š", error);
          alert("âŒ æ–°å¢è³‡æ–™å¤±æ•—ï¼Œè«‹æª¢æŸ¥ Consoleã€‚");
        }
      });
    });
  </script>
</head>

<body class="p-6 bg-gray-50 font-sans">
  <h1 class="text-2xl font-bold mb-4">ğŸ¶ æ–°å¢æµªæµªè³‡æ–™</h1>
  <form id="addPetForm" class="grid gap-4 max-w-md bg-white p-6 rounded-lg shadow">
    <label>åå­—<input name="name" class="border rounded w-full p-2" placeholder="ä¾‹ï¼šå°è™" required /></label><br>
    <label>é¡åˆ¥<select name="species" class="border rounded w-full p-2" required>
        <option value="">è«‹é¸æ“‡</option>
        <option value="è²“">è²“å’ª</option>
        <option value="ç‹—">ç‹—ç‹—</option>
      </select>
    </label><br>
    <label>å¹´é½¡<input name="age" class="border rounded w-full p-2" placeholder="å¹¾å€‹æœˆæˆ–å¹¾æ­²" /></label><br>
    <label>æ€§åˆ¥<select name="gender" class="border rounded w-full p-2">
        <option value="">æœªæŒ‡å®š</option>
        <option value="ç”·ç”Ÿ">ç”·ç”Ÿ</option>
        <option value="å¥³ç”Ÿ">å¥³ç”Ÿ</option>
      </select>
    </label><br>
    <label>
      ç°¡ä»‹ï¼æè¿°ï¼š
      <textarea name="desc" class="border rounded w-full p-2" rows="3" placeholder="å€‹æ€§ã€ç¿’æ…£ã€æ•…äº‹ç­‰"></textarea>
    </label><br>
    <label>
      ç…§ç‰‡ç¶²å€ï¼š
      <input name="image" class="border rounded w-full p-2" placeholder="https://..." />
    </label>

    <button class="bg-brand-500 hover:bg-brand-600 text-white py-2 rounded">æ–°å¢æµªæµª</button>
  </form>
</body>
</html>
