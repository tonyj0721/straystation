<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>台中簡媽媽狗園｜後台管理</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body.modal-open { overflow: hidden; }
    #cards { min-height: 40vh; }
  </style>
</head>
<body class="bg-[#fdf6f7] text-gray-800 min-h-screen">

  <!-- 登入畫面 -->
  <div id="login-section" class="flex flex-col items-center justify-center min-h-screen">
    <h1 class="text-3xl font-bold mb-6 text-rose-600">台中簡媽媽狗園｜後台管理</h1>
    <button id="login-btn" class="bg-rose-500 hover:bg-rose-600 text-white px-6 py-3 rounded-xl">使用 Google 登入</button>
  </div>

  <!-- 管理畫面 -->
  <div id="admin-section" class="hidden p-4 md:p-8 space-y-6">
    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
      <h2 class="text-2xl font-bold text-rose-600">送養資料管理</h2>
      <div class="flex items-center gap-3">
        <span id="user-email" class="text-gray-600 text-sm"></span>
        <button id="logout-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-lg">登出</button>
      </div>
    </div>

    <!-- 表單區 -->
    <form id="pet-form" class="bg-white p-6 rounded-2xl shadow space-y-4">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <input id="name" type="text" placeholder="名字" class="border p-2 rounded" required>
        <select id="type" class="border p-2 rounded" required>
          <option value="">選擇類別</option>
          <option value="cat">貓</option>
          <option value="dog">狗</option>
        </select>
        <select id="category" class="border p-2 rounded" required>
          <option value="">請先選擇類別</option>
        </select>
        <select id="breed" class="border p-2 rounded" required>
          <option value="">請先選擇類別與品種類型</option>
        </select>
        <input id="age" type="text" placeholder="年齡（例如 6個月、2歲）" class="border p-2 rounded">
        <select id="gender" class="border p-2 rounded" required>
          <option value="">選擇性別</option>
          <option value="男生">男生</option>
          <option value="女生">女生</option>
        </select>
      </div>

      <textarea id="desc" placeholder="簡介（個性、習慣、故事等）" class="border p-2 rounded w-full" rows="3"></textarea>

      <div>
        <label class="font-semibold">上傳圖片（最多 5 張，可分次追加）：</label>
        <input id="images" type="file" accept="image/*" multiple class="block mt-2">
        <div id="preview" class="flex flex-wrap gap-2 mt-2"></div>
      </div>

      <button id="submit-btn" type="submit" class="bg-rose-500 hover:bg-rose-600 text-white px-6 py-2 rounded-lg w-full sm:w-auto">登錄</button>
    </form>

    <!-- 已登錄區 -->
    <div class="bg-white p-4 md:p-6 rounded-2xl shadow">
      <div class="flex flex-col md:flex-row items-center justify-between gap-3">
        <h3 class="text-xl font-semibold text-rose-600">已登錄動物</h3>
        <input id="search" type="text" placeholder="搜尋名字…" class="w-full md:w-80 border rounded px-3 py-2">
      </div>
      <div id="cards" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mt-4"></div>
      <p id="empty-tip" class="text-gray-500 text-sm mt-3">輸入名字以搜尋並顯示卡片</p>
    </div>
  </div>

  <!-- 詳細資料 Modal -->
  <div id="modal" class="hidden fixed inset-0 bg-[#fdf6f7]/90 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-5xl relative flex flex-col md:flex-row overflow-hidden">
      <button id="close-modal" class="absolute top-3 left-3 text-gray-600 text-2xl">✖</button>
      <div class="absolute top-3 right-4 flex gap-3 text-xl">
        <button id="edit-btn">✏️</button>
        <button id="delete-btn">🗑️</button>
      </div>

      <div class="md:w-1/2 bg-gray-100 flex flex-col items-center p-4">
        <img id="main-img" src="" class="w-full rounded-lg mb-3 object-cover aspect-square">
        <div id="thumbs" class="flex gap-2 overflow-x-auto"></div>
      </div>

      <div class="md:w-1/2 p-4 flex flex-col">
        <h3 id="modal-name" class="text-2xl font-bold text-rose-600 mb-2"></h3>
        <p id="modal-info" class="text-gray-600 text-sm mb-4"></p>
        <div id="modal-desc" class="text-gray-700 text-sm flex-1 overflow-y-auto max-h-[70vh] mb-4"></div>
        <button id="adopt-btn" class="bg-rose-500 hover:bg-rose-600 text-white px-4 py-2 rounded-lg w-full">已領養</button>

        <div id="adopt-upload" class="hidden mt-4 p-4 bg-gray-50 rounded-xl shadow-inner">
          <label class="font-semibold block mb-2">上傳合照（最多 5 張，可略過）</label>
          <input id="adopt-photos" type="file" accept="image/*" multiple>
          <button id="save-adopt" class="mt-3 bg-rose-500 hover:bg-rose-600 text-white px-4 py-2 rounded-lg w-full">要幸福喔 💕</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
