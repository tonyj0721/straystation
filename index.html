<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StrayStation</title>

  <!-- Google Font（後台使用的字體，前台同步） -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      background: #fafafa;
    }

    /* --- Admin Modal 主圖樣式移植 --- */
    .modal-main-photo {
      width: 100%;
      max-height: 360px;
      border-radius: 12px;
      object-fit: contain;
      background-color: #f9f9f9;
      display: block;
      margin: 0 auto 10px auto;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    /* --- Admin Modal 縮圖列表 --- */
    .modal-photos {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(18%, 1fr));
      gap: 6px;
      margin-bottom: 16px;
      justify-items: center;
      align-items: center;
    }

    .modal-photos img {
      width: 100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid transparent;
      cursor: pointer;
      transition: transform 0.2s, border-color 0.2s;
    }

    .modal-photos img.active {
      border-color: #f97316; /* 橘色框：與後台一致 */
    }

    .modal-photos img:hover {
      transform: scale(1.05);
    }

    /* --- Admin 樣式：描述框 --- */
    .modal-desc-box {
      background: #fffaf4;
      padding: 14px 16px;
      border-radius: 10px;
      font-size: 0.95rem;
      line-height: 1.65;
      white-space: pre-wrap;
      color: #333;
    }

    /* Modal 遮罩 */
    dialog::backdrop {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(2px);
    }

    /* Modal 本體 */
    dialog {
      border: none;
      padding: 0;
      border-radius: 16px;
      max-width: 420px;
      width: 100%;
    }
  </style>
</head>

<body class="p-4">

  <!-- 前台內容省略（原本列表的地方保持不動） -->
  <h1 class="text-xl font-bold mb-4">StrayStation 寵物列表</h1>
  <div id="petList" class="grid gap-4"></div>

  <!-- ========================== -->
  <!-- ★★★ Admin Modal 移植版 ★★★ -->
  <!-- ========================== -->
  <dialog id="petDialog" class="shadow-xl">

    <div class="p-4 pb-2 text-center border-b">
      <span id="dlgName" class="text-lg font-bold"></span>
      <button id="dlgClose" class="float-right text-gray-500 hover:text-black text-xl">&times;</button>
    </div>

    <div class="p-4">

      <!-- 主圖（Admin Style） -->
      <img id="dlgImg" class="modal-main-photo" alt="主圖">

      <!-- 縮圖列（Admin Style） -->
      <div id="dlgThumbs" class="modal-photos"></div>

      <!-- Tag -->
      <div id="dlgTags" class="flex flex-wrap gap-2 mb-4"></div>

      <!-- 描述 -->
      <div id="dlgDesc" class="modal-desc-box"></div>
    </div>
  </dialog>

  <!-- ========================== -->
  <!-- ★★★ 前台 JS（整合 Admin Modal）★★★ -->
  <!-- ========================== -->
<script>
const petList = document.querySelector("#petList");
const dlg = document.querySelector("#petDialog");
const dlgClose = document.querySelector("#dlgClose");

dlgClose.addEventListener("click", () => dlg.close());

// 載入列表資料（與前台原本功能一致）
async function loadPets() {
  const res = await fetch("pets.json");
  const pets = await res.json();

  pets.forEach(pet => {
    const div = document.createElement("div");
    div.className = "bg-white shadow rounded p-3 cursor-pointer";
    div.innerHTML = `
      <img src="${pet.photos[0]}" class="w-full rounded mb-2" />
      <div class="font-bold text-lg">${pet.name}</div>
    `;
    div.onclick = () => openPet(pet);
    petList.appendChild(div);
  });
}

// 打開 admin-style modal
function openPet(pet) {
  dlg.querySelector("#dlgName").textContent = pet.name;
  dlg.querySelector("#dlgDesc").textContent = pet.desc;

  // 主圖
  const dlgImg = dlg.querySelector("#dlgImg");
  dlgImg.src = pet.photos[0];

  // 縮圖區
  const thumbs = dlg.querySelector("#dlgThumbs");
  thumbs.innerHTML = "";

  pet.photos.forEach((src, i) => {
    const img = document.createElement("img");
    img.src = src;
    img.className = i === 0 ? "active" : "";
    img.onclick = () => {
      dlgImg.src = src;

      // active 外框
      thumbs.querySelectorAll("img").forEach(t => t.classList.remove("active"));
      img.classList.add("active");
    };
    thumbs.appendChild(img);
  });

  // tags
  const tags = dlg.querySelector("#dlgTags");
  tags.innerHTML = "";
  pet.tags.forEach(tag => {
    const span = document.createElement("span");
    span.className =
      "px-3 py-1 bg-orange-100 text-orange-600 rounded-full text-sm";
    span.textContent = tag;
    tags.appendChild(span);
  });

  dlg.showModal();
}

loadPets();

</script>

</body>
</html>
